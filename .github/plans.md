## Fin-Infra Web – Experience Differentiation Plan (v4)

### Vision

Deliver a personal-finance cockpit that feels as polished as Monarch Money or Quicken Simplifi: data-import ready, hyper-personalized, and emotionally reassuring. Every surface should adapt to the member’s goals, highlight actionable insights, and provide confident automation with human-friendly explanations.

### Current Experience Observations

* **Fragmented onboarding:** Pages assume fully populated mocks. There is no guided setup, institution linking, or first-use scaffolding in `app/(dashboard)/overview/page.tsx` or the layout shell. The sidebar immediately exposes every page, overwhelming new members.
* **Insight system lacks memory:** `InsightCard` and `lib/insights/definitions.ts` centralize copy, but there is no persistence of pin/resolution state across sessions, no prioritization by persona, and little feedback loop into charts or goal projections.
* **Charts focus on static snapshots:** Dynamic imports (e.g., `Overview` loading `PerformanceTimeline` and `CashFlow`) protect performance, but there is no scenario comparison, goal overlays, or natural language summaries to build trust in automated recommendations.
* **Mobile ergonomics are thin:** `DashboardLayout` + `Sidebar` rely on large-screen real estate; mobile uses a slide-in drawer with minimal optimization and no contextual quick actions. Critical tables (transactions, accounts) are wide and rely on virtualization without stacked card fallbacks.
* **Design language is cohesive but generic:** Tokens in `app/globals.css` give us a solid base, yet the brand voice (colors, iconography, typography) mirrors boilerplate fintech dashboards. Empty states, celebratory moments, and risk alerts need motion, illustration, and tone to create an emotional hook.
* **Security & trust messaging is implicit:** Privacy toggles exist in the top bar, but there is no surfaced audit trail, alerting, or security center to reassure members their sensitive data is handled with care.

### Guiding Principles

1. **Adaptive journey:** Surfaces respond to lifecycle stage (onboarding, day-to-day tracking, planning, troubleshooting).
2. **Explainable automation:** Every proactive action (rebalance, savings adjustment, tax harvest) includes plain-language justification plus metrics members can interrogate.
3. **Delight with restraint:** Motion, theming, and celebration should reinforce confidence without distracting from financial clarity.
4. **Mobile-first rigor:** No new feature ships without small-screen ergonomics, offline empathy, and high-contrast accessibility.
5. **Data dignity:** Treat every balance, document, and decision as sensitive—mask by default, log responsibly, and hand members the controls.

---

### Workstreams

#### WS-A – Guided Onboarding & Money Graph Foundation

Goal: Turn the first session into a structured setup that connects accounts, sets intents, and seeds personalization.

Deliverables

* Multi-step onboarding flow under `app/(auth)/onboarding` with progress tracker, account aggregation placeholders, and persona questions (goals, risk tolerance, budgeting style).
* Institution linking simulation (Plaid-style modal) wired to mock services in `lib/services` with optimistic UI states, retry flows, and masked values tied to `usePrivacy`.
* Money Graph schema in `types/domain.ts` and `lib/mock` describing relationships (accounts → transactions → goals) to power contextual recommendations.
* Onboarding completion state persisted via secure storage hooks (`lib/security/use-secure-storage`) and reflected in `DashboardLayout` (e.g., badges that show setup progress until complete).

Acceptance Criteria

* Members who skip onboarding land on an “empty dashboard” state with guided actions.
* Persona answers influence default insights and KPI tiles across Overview, Budget, Goals.

#### WS-B – Personalized Dashboards & Goal Planning

Goal: Reshape core surfaces to feel tailored—focus on contextual KPIs, plan progress, and next-best actions.

Deliverables

* Adaptive `KPICards` variants that swap metrics based on persona (e.g., debt payoff vs. wealth building) and highlight urgency via iconography.
* Timeline overlays within `PerformanceTimeline` that compare actual vs. planned milestones, plus copy generated by a lightweight insights summarizer in `lib/insights/service`.
* Goal planner revamp in `app/(dashboard)/goals` featuring stacked cards per goal, sliders with scenario snapshots, and celebratory states when milestones are hit.
* Budget & Cash Flow modules that surface recurring risk (cash burn warnings, savings streaks) and link directly to actionable toggles (auto-transfer, category adjustments).

Acceptance Criteria

* Persona-specific dashboards validated via storybook-like fixtures.
* Goal completion triggers celebratory animation + shareable summary.

#### WS-C – Automation Copilot & Scenario Playbooks

Goal: Introduce explainable automations that help members act with confidence.

Deliverables

* Copilot drawer component (extending `AIChatSidebar`) that proposes automations (rebalance, savings sweep, tax harvest) with diff previews and risk badges.
* Scenario playbooks for Taxes, Investments, and Budget that let members compare 2–3 parameterized cases side-by-side (componentized comparison table & charts).
* Action confirmation modals using `@/components/ui/dialog` that summarize benefits, trade-offs, and allow scheduling.
* Event instrumentation in `lib/analytics/events` capturing acceptance/decline reasons, feeding back into insights ranking.

Acceptance Criteria

* Copilot suggestions show before/after metrics referencing Money Graph data.
* Automations require explicit confirmation, provide undo toast, and log to a history timeline.

#### WS-D – Collaboration, Accountability & Shared Spaces

Goal: Support households and advisors with shared visibility, tasking, and accountability loops.

Deliverables

* Shared workspace switcher in `TopBar` avatar menu for multi-member households, with access roles defined in `types/domain.ts`.
* Comments & mentions drawer for transactions, goals, and documents leveraging `@/components/ui/textarea` + presence indicators.
* Accountability checklist widgets (due bills, tasks) integrated into Overview and Documents with reminders.
* Notification center revamp that groups alerts by workspace and channel (email, push) using `components/ui/tabs`.

Acceptance Criteria

* Every actionable card exposes “Assign” or “Share” affordances respecting permissions.
* Activity log aggregates tasks, comments, and automations with filters.

#### WS-E – Mobile, Offline & Performance Polish

Goal: Ensure parity across device sizes and resilience under poor connectivity.

Deliverables

* Mobile-first layout variant: bottom navigation for <768px, collapsible KPI summaries, cardified tables (Transactions, Accounts).
* Offline-ready states (skeletons, “last synced” badges) using service worker mock or fallback store.
* Performance budgets integrated into CI (`next/bundle-analyzer`, React Profiler snapshots for charts) with thresholds.
* Skeleton & shimmer audit to ensure every major surface has loading placeholders tailored to content height.

Acceptance Criteria

* Lighthouse mobile performance ≥ 85 in dev build for Overview, Transactions, Goals.
* Offline mode surfaces stale data banners and disables automations gracefully.

#### WS-F – Brand, Emotion & Trust Layer

Goal: Distinguish Fin-Infra visually and emotionally while reinforcing security.

Deliverables

* Brand elevation: refine `app/globals.css` tokens, introduce gradient backgrounds, iconography set, and typographic hierarchy that differentiates wealth vs. cash flows.
* Story-driven empty states & success modals with illustrations, microcopy, and confetti/motion primitives.
* Security center page in `app/(dashboard)/settings/security` showing login history, privacy toggles, and export/download controls.
* Compliance-ready copy & tooltips for sensitive metrics leveraging `InsightCard` `redactedBody` and `fallbackValue` fields.

Acceptance Criteria

* Usability tests show improved task confidence vs. baseline mocks.
* Security center reduces support burden by surfacing answers to “who can see my data?”

#### WS-G – Measurement, Experiments & Growth

Goal: Close the loop with data-driven decisions and growth levers.

Deliverables

* Experimentation hooks (feature flags) in `lib/analytics` + `.env.example` for gating new flows.
* Cohort dashboards summarizing activation, retention, automation adoption; include instrumentation for onboarding drop-off.
* In-app feedback moments (post-automation, after onboarding) collecting qualitative signals with Sonner toasts + modal forms.
* Share/export features (PDF summaries, CSV exports) that capture attribution when members share progress externally.

Acceptance Criteria

* PRD-ready dashboards exist for onboarding funnel and automation usage.
* Feedback loops feed into insights ranking algorithm.

---

### Milestones & Sequencing

* **M1 (Weeks 1–2):** WS-A foundations + Money Graph schema, deliver onboarding skeleton + persona-driven KPIs. Begin brand token refresh.
* **M2 (Weeks 3–4):** WS-B personalization + WS-E mobile layout updates. Launch celebratory states and offline banners.
* **M3 (Weeks 5–6):** WS-C automation copilot + WS-G instrumentation. Ship scenario playbooks and measurement dashboards.
* **M4 (Weeks 7–8):** WS-D collaboration + WS-F trust center. Conduct usability validation and finalize animation/microcopy polish.

### Success Metrics

* **Activation:** ≥80% of new members complete onboarding and link ≥2 accounts.
* **Engagement:** 2× increase in weekly active automations with <5% cancellation rate.
* **Confidence:** Post-action feedback averages ≥4.5/5 on clarity and trustfulness.
* **Retention:** Households using shared spaces retain at 120% vs. individual baseline.
* **Performance:** Mobile INP < 200ms on high-interaction pages; no accessibility regressions (axe clean across routes).
