## Fin-Infra Web – Experience Differentiation Plan (v4)

### Vision

Deliver a personal-finance cockpit that feels as polished as Monarch Money or Quicken Simplifi: data-import ready, hyper-personalized, and emotionally reassuring. Every surface should adapt to the member’s goals, highlight actionable insights, and provide confident automation with human-friendly explanations.

### Current Experience Observations

* **Fragmented onboarding:** Pages assume fully populated mocks. There is no guided setup, institution linking, or first-use scaffolding in `app/(dashboard)/overview/page.tsx` or the layout shell. The sidebar immediately exposes every page, overwhelming new members.
* **Insight system lacks memory:** `InsightCard` and `lib/insights/definitions.ts` centralize copy, but there is no persistence of pin/resolution state across sessions, no prioritization by persona, and little feedback loop into charts or goal projections.
* **Charts focus on static snapshots:** Dynamic imports (e.g., `Overview` loading `PerformanceTimeline` and `CashFlow`) protect performance, but there is no scenario comparison, goal overlays, or natural language summaries to build trust in automated recommendations.
* **Mobile ergonomics are thin:** `DashboardLayout` + `Sidebar` rely on large-screen real estate; mobile uses a slide-in drawer with minimal optimization and no contextual quick actions. Critical tables (transactions, accounts) are wide and rely on virtualization without stacked card fallbacks.
* **Design language is cohesive but generic:** Tokens in `app/globals.css` give us a solid base, yet the brand voice (colors, iconography, typography) mirrors boilerplate fintech dashboards. Empty states, celebratory moments, and risk alerts need motion, illustration, and tone to create an emotional hook.
* **Security & trust messaging is implicit:** Privacy toggles exist in the top bar, but there is no surfaced audit trail, alerting, or security center to reassure members their sensitive data is handled with care.

### Guiding Principles

1. **Adaptive journey:** Surfaces respond to lifecycle stage (onboarding, day-to-day tracking, planning, troubleshooting).
2. **Explainable automation:** Every proactive action (rebalance, savings adjustment, tax harvest) includes plain-language justification plus metrics members can interrogate.
3. **Delight with restraint:** Motion, theming, and celebration should reinforce confidence without distracting from financial clarity.
4. **Mobile-first rigor:** No new feature ships without small-screen ergonomics, offline empathy, and high-contrast accessibility.
5. **Data dignity:** Treat every balance, document, and decision as sensitive—mask by default, log responsibly, and hand members the controls.

---

### Workstreams

#### WS-A – Guided Onboarding & Money Graph Foundation

Goal: Turn the first session into a structured setup that connects accounts, sets intents, and seeds personalization.

Deliverables

* Multi-step onboarding flow under `app/(auth)/onboarding` with progress tracker, account aggregation placeholders, and persona questions (goals, risk tolerance, budgeting style).
* Institution linking simulation (Plaid-style modal) wired to mock services in `lib/services` with optimistic UI states, retry flows, and masked values tied to `usePrivacy`.
* Money Graph schema in `types/domain.ts` and `lib/mock` describing relationships (accounts → transactions → goals) to power contextual recommendations.
* Onboarding completion state persisted via secure storage hooks (`lib/security/use-secure-storage`) and reflected in `DashboardLayout` (e.g., badges that show setup progress until complete).

Acceptance Criteria

* Members who skip onboarding land on an “empty dashboard” state with guided actions.
* Persona answers influence default insights and KPI tiles across Overview, Budget, Goals.

#### WS-B – Personalized Dashboards & Goal Planning

Goal: Reshape core surfaces to feel tailored—focus on contextual KPIs, plan progress, and next-best actions.

Deliverables

* Adaptive `KPICards` variants that swap metrics based on persona (e.g., debt payoff vs. wealth building) and highlight urgency via iconography.
* Timeline overlays within `PerformanceTimeline` that compare actual vs. planned milestones, plus copy generated by a lightweight insights summarizer in `lib/insights/service`.
* Goal planner revamp in `app/(dashboard)/goals` featuring stacked cards per goal, sliders with scenario snapshots, and celebratory states when milestones are hit.
* Budget & Cash Flow modules that surface recurring risk (cash burn warnings, savings streaks) and link directly to actionable toggles (auto-transfer, category adjustments).

Acceptance Criteria

* Persona-specific dashboards validated via storybook-like fixtures.
* Goal completion triggers celebratory animation + shareable summary.

#### WS-C – Automation Copilot & Scenario Playbooks

Goal: Introduce explainable automations that help members act with confidence.

Deliverables

* Copilot drawer component (extending `AIChatSidebar`) that proposes automations (rebalance, savings sweep, tax harvest) with diff previews and risk badges.
* Scenario playbooks for Taxes, Investments, and Budget that let members compare 2–3 parameterized cases side-by-side (componentized comparison table & charts).
* Action confirmation modals using `@/components/ui/dialog` that summarize benefits, trade-offs, and allow scheduling.
* Event instrumentation in `lib/analytics/events` capturing acceptance/decline reasons, feeding back into insights ranking.

Acceptance Criteria

* Copilot suggestions show before/after metrics referencing Money Graph data.
* Automations require explicit confirmation, provide undo toast, and log to a history timeline.

#### WS-D – Collaboration, Accountability & Shared Spaces

Goal: Support households and advisors with shared visibility, tasking, and accountability loops.

Deliverables

* Shared workspace switcher in `TopBar` avatar menu for multi-member households, with access roles defined in `types/domain.ts`.
* Comments & mentions drawer for transactions, goals, and documents leveraging `@/components/ui/textarea` + presence indicators.
* Accountability checklist widgets (due bills, tasks) integrated into Overview and Documents with reminders.
* Notification center revamp that groups alerts by workspace and channel (email, push) using `components/ui/tabs`.

Acceptance Criteria

* Every actionable card exposes “Assign” or “Share” affordances respecting permissions.
* Activity log aggregates tasks, comments, and automations with filters.

#### WS-E – Mobile, Offline & Performance Polish

Goal: Ensure parity across device sizes and resilience under poor connectivity.

Deliverables

* Mobile-first layout variant: bottom navigation for <768px, collapsible KPI summaries, cardified tables (Transactions, Accounts).
* Offline-ready states (skeletons, “last synced” badges) using service worker mock or fallback store.
* Performance budgets integrated into CI (`next/bundle-analyzer`, React Profiler snapshots for charts) with thresholds.
* Skeleton & shimmer audit to ensure every major surface has loading placeholders tailored to content height.

Acceptance Criteria

* Lighthouse mobile performance ≥ 85 in dev build for Overview, Transactions, Goals.
* Offline mode surfaces stale data banners and disables automations gracefully.

#### WS-F – Brand, Emotion & Trust Layer

Goal: Distinguish Fin-Infra visually and emotionally while reinforcing security.

Deliverables

* Brand elevation: refine `app/globals.css` tokens, introduce gradient backgrounds, iconography set, and typographic hierarchy that differentiates wealth vs. cash flows.
* Story-driven empty states & success modals with illustrations, microcopy, and confetti/motion primitives.
* Security center page in `app/(dashboard)/settings/security` showing login history, privacy toggles, and export/download controls.
* Compliance-ready copy & tooltips for sensitive metrics leveraging `InsightCard` `redactedBody` and `fallbackValue` fields.

Acceptance Criteria

* Usability tests show improved task confidence vs. baseline mocks.
* Security center reduces support burden by surfacing answers to “who can see my data?”

#### WS-G – Measurement, Experiments & Growth

Goal: Close the loop with data-driven decisions and growth levers.

Deliverables

* Experimentation hooks (feature flags) in `lib/analytics` + `.env.example` for gating new flows.
* Cohort dashboards summarizing activation, retention, automation adoption; include instrumentation for onboarding drop-off.
* In-app feedback moments (post-automation, after onboarding) collecting qualitative signals with Sonner toasts + modal forms.
* Share/export features (PDF summaries, CSV exports) that capture attribution when members share progress externally.

Acceptance Criteria

* PRD-ready dashboards exist for onboarding funnel and automation usage.
* Feedback loops feed into insights ranking algorithm.

---

### Milestones & Sequencing

* **M1 (Weeks 1–2):** WS-A foundations + Money Graph schema, deliver onboarding skeleton + persona-driven KPIs. Begin brand token refresh.
* **M2 (Weeks 3–4):** WS-B personalization + WS-E mobile layout updates. Launch celebratory states and offline banners.
* **M3 (Weeks 5–6):** WS-C automation copilot + WS-G instrumentation. Ship scenario playbooks and measurement dashboards.
* **M4 (Weeks 7–8):** WS-D collaboration + WS-F trust center. Conduct usability validation and finalize animation/microcopy polish.

### Success Metrics

* **Activation:** ≥80% of new members complete onboarding and link ≥2 accounts.
* **Engagement:** 2× increase in weekly active automations with <5% cancellation rate.
* **Confidence:** Post-action feedback averages ≥4.5/5 on clarity and trustfulness.
* **Retention:** Households using shared spaces retain at 120% vs. individual baseline.
* **Performance:** Mobile INP < 200ms on high-interaction pages; no accessibility regressions (axe clean across routes).

---

### Page & Surface Enhancement Checklist

The following breakdown translates the qualitative UX guidance into executable tasks. Each sub-list is ordered for sequential delivery and references relevant components or directories for quick navigation.

#### Global Design System (applies across all routes)

1. Audit existing spacing, font, and color tokens in `app/globals.css`, `styles/themes`, and shared UI components to map current usage patterns.
2. Define updated spacing scale and typography ramp; document changes in `docs/design-tokens.md` and update relevant CSS variables.
3. Implement standardized card padding/margins within shared card primitives (e.g., `components/ui/card.tsx`) ensuring responsive adjustments at breakpoints.
4. Validate accent color contrast against WCAG AA using design tokens—adjust success/danger palettes and update usage in financial delta text components.
5. Confirm single font-family usage across `layout.tsx` shells; remove redundant font imports and enforce heading/body styles via Tailwind or CSS modules.
6. Extend responsive mixins to ensure cards stack and sidebars collapse on <1024px widths; verify with Storybook or responsive preview in `pnpm dev`.
7. Build a reusable tooltip description map in `lib/tooltips` and apply to all data points flagged in subsequent sections; ensure hover + focus accessibility.
8. Introduce a global dark-mode + font-size preference control surfaced in Settings (detailed later) and propagate CSS variables for theme switching.

#### Overview Dashboard (`app/(dashboard)/overview`)

1. Update card grid layout to include subtle separators (border or shadow) and consistent icon sizing via `OverviewCard` component.
2. Add “View details” CTA links under each high-level card, routing to the appropriate detail page (`/portfolio`, `/accounts`, `/cash-flow`, etc.).
3. Embed 7-day sparkline mini-charts inside KPI cards using lightweight chart component (reuse from `components/charts/sparkline.tsx`).
4. Refresh Portfolio Health tabs: implement clear active/inactive styles (background fills, bold typography) and ensure keyboard navigation.
5. Verify performance chart accessibility—provide aria labels, tooltip descriptions, and responsive behavior for mobile stacking.
6. Confirm tooltips for net worth, investable assets, cash, debt, daily P/L, credit score include updated copy from `lib/tooltips`.

#### Accounts Page (`app/(dashboard)/accounts`)

1. Increase typography hierarchy in summary cards; align iconography and embed optional chart snippets per card.
2. Refine “All Insights” module: add collapse/expand control with persisted state in local storage; reduce vertical footprint by default.
3. Enhance accounts table with sortable headers and filter controls (account type, institution) using `components/ui/table` utilities.
4. Implement sticky header behavior and test with long account lists to ensure columns remain visible during scroll.
5. Ensure responsive card fallback for narrow screens (stacked account summaries) tying into WS-E mobile work.

#### Portfolio Page (`app/(dashboard)/portfolio`)

1. Annotate interactive metrics (Sharpe ratio, beta, etc.) with info icons triggering modal explanations; wire modals to `components/ui/dialog`.
2. Group AI insights by category, introducing accordion-style expand/collapse behavior with default collapsed state for low-priority insights.
3. Provide quick action buttons within each insight (e.g., “Rebalance now”) linking to automation or scenario workflows in WS-C.
4. Add tooltips and aria descriptions for new UI controls and ensure charts scale on mobile.

#### Crypto Page (`app/(dashboard)/crypto`)

1. Design a toolbar wrapper for exchange/grouping filters with sufficient spacing and keyboard-focus outlines.
2. Integrate micro-charts for BTC dominance and 24h change within AI insights card, ensuring data pulls from existing market feeds or mocks.
3. When holdings exceed concentration threshold, display diversification CTA linking to portfolio rebalancing guide.

#### Cash Flow Page (`app/(dashboard)/cash-flow`)

1. Replace or augment current charts with stacked bar/area visualization separating inflows/outflows per timeframe using `components/charts` primitives.
2. Introduce insight pin/unpin controls and store state via `useSecureStorage` to persist member selections.
3. Optimize layout for mobile stacking and ensure axis labels meet contrast standards.

#### Transactions Page (`app/(dashboard)/transactions`)

1. Update actionable insight cards with primary/secondary buttons (Enable boosts, Review ride) and include dismiss/resolve actions.
2. Extend transactions table to support customizable columns and advanced filters; surface search hints within input placeholder.
3. Implement sticky filters/search bar for long lists; ensure accessibility (aria-live updates when filters applied).

#### Budget Page (`app/(dashboard)/budget`)

1. Introduce progress ring visualization for budget snapshot using shared chart component; ensure color contrast compliance.
2. For over-budget categories, render mini bar chart comparing actual vs. planned spend, plus descriptive tooltip.
3. Validate responsive behavior and update insights copy to encourage corrective actions.

#### Goals Page (`app/(dashboard)/goals`)

1. Display aggregate goal progress with progress bars/rings and monthly contribution summaries.
2. Add filters for active/completed goals; ensure accessible toggle or segmented control implementation.
3. Implement “Add Goal” modal wizard capturing name, target, monthly contribution, timeframe, and account linkage; include validation + success state.

#### Taxes Page (`app/(dashboard)/taxes`)

1. Add a timeline component showcasing key tax deadlines with icons and descriptive tooltips.
2. Append “Why?” explanation links to each insight card, opening modal or side drawer with detailed rationale and data sources.
3. Confirm automated actions integrate with WS-C copilot for harvest or document reminders.

#### Insights Page (`app/(dashboard)/insights`)

1. Implement filter tabs (All, Spending Trends, Investment Health, Goals Forecast) and integrate search bar with fuzzy matching.
2. Highlight new/unread insights via badges or accent border; ensure state persists per member.
3. Attach recommended actions with one-click triggers (with confirmation dialog) and track analytics events for engagement.

#### Documents Page (`app/(dashboard)/documents`)

1. Enlarge drag-and-drop CTA text, add accepted file type/size list, and ensure keyboard operability.
2. Provide document type chips/tags with multi-select filtering; allow filtering by year/account with persistent state.
3. Maintain accessibility by providing aria descriptions for upload feedback and error states.

#### Settings Page (`app/(dashboard)/settings`)

1. Standardize toggle styling for notification controls; add descriptive helper text beneath each toggle.
2. Build appearance settings panel for light/dark mode, font sizing, and dyslexia-friendly font option leveraging global theme tokens.
3. Ensure security center (WS-F) integrates with settings navigation and follows same visual language.

#### Home/Landing Page (`app/page.tsx` + related components)

1. Validate hero typography scales responsively; adjust CSS clamp values for headline/tagline.
2. Ensure hero buttons have accessible labels and maintain contrast against background texture; add focus styles.
3. Keep navigation bar sticky with visible TradeHub logo and primary “Get Started” button styling.
4. Align feature highlight cards (Smart Insights, Portfolio Tracking, Risk Management) with consistent icon sizing and add hover states linking to detailed sections.
5. Insert social proof (logos/testimonial) near final CTA and ensure single primary button directs to sign-up flow.
6. Smooth scrolling transitions between hero and features; consider subtle animation triggers on scroll within performance budgets.
7. Confirm alt text coverage for icons and prepare dark-mode theming parity.

---

### Validation & QA Checklist

1. Conduct component-level Storybook reviews (or Chromatic) for all updated UI primitives ensuring responsive states.
2. Run automated accessibility audits (axe-core) on each page post-update.
3. Execute Lighthouse checks for desktop and mobile focusing on performance and accessibility thresholds.
4. Verify analytics events fire for new CTAs, filters, and automations using `lib/analytics/events` mocks.
5. Update documentation (`docs/release-notes.md`, `docs/design-tokens.md`) summarizing UX enhancements.
6. Collect qualitative feedback via user tests or stakeholder reviews before marking workstreams complete.

